
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Limbaje Scriptice &#8212; Limbaje scriptice 1 documentation</title>
    <link rel="stylesheet" type="text/css" href="./_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="./_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="./_static/documentation_options.js"></script>
    <script src="./_static/jquery.js"></script>
    <script src="./_static/underscore.js"></script>
    <script src="./_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="./_static/doctools.js"></script>
    <script src="./_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Limbaje scriptice’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="./_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="limbaje-scriptice">
<h1>Limbaje Scriptice<a class="headerlink" href="#limbaje-scriptice" title="Permalink to this heading">¶</a></h1>
<div class="section" id="ubuntu-vm">
<h2>Ubuntu VM<a class="headerlink" href="#ubuntu-vm" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Instalare masina virtuala cu <a class="reference external" href="https://ubuntu.com/download/desktop">Ubuntu Desktop</a> (22.04/20.04)</p></li>
<li><p>Configurat masina virtuala dupa preferine (user, password, etc.)</p></li>
<li><p>Tool-uri de instalat:</p>
<ul>
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">Docker</a></p>
<ul>
<li><p>De rulat comenzile de la <b>Set up the repository</b> pana la <b>Install Docker Engine</b> inclusiv</p></li>
<li><p>De rulat <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">usermod</span> <span class="pre">-aG</span> <span class="pre">docker</span> <span class="pre">$USER</span></code> ca sa poti rula docker fara <b>sudo</b></p></li>
<li><p>Relog ca sa se aplice configurarile</p></li>
<li><p>De testat comanda <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.docker.com/compose/install/other/#on-linux">Docker Compose</a></p>
<ul>
<li><p>De rulat cele 2 comenzi de la punctul 1. si 3.</p></li>
<li><p>De testat comanda <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> / <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span></code></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://sqlitebrowser.org/dl/">Sqlite Browser</a></p>
<ul>
<li><p>De downloadat din sectiunea <b>Linux</b>, pachetul AppImage si pus pe desktop</p></li>
<li><p>De rulat comanda <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">&lt;fisier&gt;.AppImage</span></code> si apoi <code class="docutils literal notranslate"><span class="pre">./&lt;fisier&gt;.AppImage</span></code></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://code.visualstudio.com/docs/setup/linux">VSCode</a></p>
<ul>
<li><p>De rulat comenzile pana la sectiunea <b>RHEL, Fedora and CentOS</b></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Masina virtuala vine cu Python3 deja instalat</p></li>
<li><p>De rulat comanda <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code> pentru a instala toate pachetele de Python necesare</p>
<ul>
<li><p>Acestea contin un framework de creare a API-urilor, de conectare la o baza de date si serverul care ruleaza API-ul</p></li>
</ul>
</li>
<li><p>De downloadat datasetul <a class="reference external" href="https://gist.github.com/netj/8836201">Iris</a> si procesat astfel incat campul <code class="docutils literal notranslate"><span class="pre">Variety</span></code> sa devina din string in numeric (folosind <b>pandas</b>)</p></li>
<li><p>Framework-ul pentru API este numit <a class="reference external" href="https://fastapi.tiangolo.com/">FastAPI</a></p></li>
<li><p>De urmarit si implementat tutorialul de pe site-ul lor -&gt; <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/first-steps/">Tutorial</a></p></li>
<li><p>De creat <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/sql-databases/#crud-utils">CRUD</a> Endpoints + <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/extra-models/">Model</a> + DB <a class="reference external" href="https://github.com/marshmallow-code/marshmallow-sqlalchemy">Schema</a> pentru flori (sepal_length, sepal_width, petal_length, petal_width, class)</p>
<ul>
<li><p>Pentru mai multe detalii e un tutorial <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/sql-databases">aici</a> in care sunt expuse mai multe notiuni si mai detaliat</p></li>
<li><p>Endpoints:</p>
<ul>
<li><p>GetAllFlowers</p></li>
<li><p>GetFlowerById</p></li>
<li><p>GetAllFlowersByClass</p></li>
<li><p>CreateFlower</p></li>
<li><p>DeleteFlower(by id)</p></li>
<li><p>UpdateFlower(by id)</p></li>
</ul>
</li>
</ul>
</li>
<li><p>De modificat fisierul <code class="docutils literal notranslate"><span class="pre">./db/init_db.py</span></code> pentru a incarca datele in baza de date (folosind functiile de CRUD)</p>
<ul>
<li><p>Optional de verificat cu <b>Sqlite Browser</b> daca s-au incarcat datele</p></li>
<li><p>Optional de incarcat date si cu request-uri</p></li>
</ul>
</li>
<li><p>De testat endpoint-urile folosind <a class="reference external" href="http://localhost:8000/docs">Swagger</a></p></li>
</ul>
</div>
<div class="section" id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>De creat imagine Docker</p>
<ul>
<li><p>Se creaza fisierul <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code></p>
<ul>
<li><p>Trebuie sa contina versiunea de Python folosita pe masina virtuala</p></li>
<li><p>Trebuie sa contina fisierul de requirements</p></li>
<li><p>Trebuie sa expui portul pe care ruleaza</p></li>
<li><p>Trebuie rulata comanda care porneste serverul de API cu 2 parametrii <code class="docutils literal notranslate"><span class="pre">host</span></code> si <code class="docutils literal notranslate"><span class="pre">port</span></code> astfel incat sa fie accesibil dinafara containerului</p></li>
</ul>
</li>
<li><p>Se <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/build/">construieste</a> imaginea cu <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> (de vazut care sunt ceilalti parametrii)</p></li>
</ul>
</li>
<li><p>Se <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/run/">ruleaza</a> containerul cu <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> (de vazut care sunt ceilalti parametrii pentru nume, port, sa porneasca in background, etc.)</p></li>
<li><p>Se verifica starea containerului cu <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code></p></li>
<li><p>Se verifica log-urile containerului cu <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">&lt;nume_container&gt;</span></code></p></li>
<li><p>Se verifica daca se poate accesa <a class="reference external" href="http://localhost:8000/docs">Swagger</a></p></li>
<li><p>De identificat problemele existente si cum le putem rezolva</p></li>
</ul>
</div>
<div class="section" id="docker-compose">
<h2>Docker Compose<a class="headerlink" href="#docker-compose" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>De creat <a class="reference external" href="https://github.com/vladutdinu/AstroSwipe/blob/main/dev-ops/docker-compose.yaml">fisierul</a> <code class="docutils literal notranslate"><span class="pre">docker-compose.yaml</span></code></p>
<ul>
<li><p>Se creaza configuratia pentru containerul de API</p></li>
<li><p>Se creaza network</p></li>
<li><p>Se creaza volum local</p></li>
<li><p>Se expuna portul</p></li>
<li><p>Se rezolva problemele legate de rularea simpla a containerului (de discutat)</p></li>
</ul>
</li>
<li><p>Se porneste configuratia din <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> cu <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code> (de gasit si flag-uri care pot fi folosite)</p></li>
</ul>
</div>
<div class="section" id="machine-learning">
<h2>Machine Learning<a class="headerlink" href="#machine-learning" title="Permalink to this heading">¶</a></h2>
<div class="section" id="descriere">
<h3>Descriere<a class="headerlink" href="#descriere" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>In fisierul de requirements exista un pachet de pip PyOD care are mai multe implementari de algoritmi si modele de ML. In cazul de fata o sa folosim <a class="reference external" href="https://pyod.readthedocs.io/en/latest/pyod.models.html#pyod.models.knn.KNN">KNN</a> (putem evalua si incerca si altele) pentru a antrena un model, a salva si a face predictii.</p></li>
<li><p>Pe VSCode o sa instalam cateva extensii pentru Python, Prettify si Jupyter Notebook ca sa te familiarizezi cu functionalitatea bibliotecii PyOD</p></li>
<li><p>Antrenam modele, testam, facem predictii si integram in API (facem endpoint-uri de predictie, de antrenare, etc.)</p></li>
</ul>
</div>
<div class="section" id="implementare">
<h3>Implementare<a class="headerlink" href="#implementare" title="Permalink to this heading">¶</a></h3>
<div class="section" id="ml">
<h4>ML<a class="headerlink" href="#ml" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Facem un fisier <code class="docutils literal notranslate"><span class="pre">train.ipynb</span></code>, importam tot ce e necesar pentru a lucra cu KNN din PyOD</p></li>
<li><p>Citim datasetul Iris prelucrat anterior</p></li>
<li><p>Antrenam modelul</p></li>
<li><p>Salvam modelul</p></li>
<li><p>Incarcam modelul</p></li>
<li><p>Facem predictio in functie de anumite valori date de noi si cu modelul incarcat</p></li>
<li><p>Evaluam pasii facuti</p></li>
</ul>
</div>
<div class="section" id="integrare-api">
<h4>Integrare API<a class="headerlink" href="#integrare-api" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Creare model pentru datele care vor veni pentru predictie</p></li>
<li><p>Creare endpoint pentru predictie</p></li>
<li><p>Reconstruirea imaginii de docker</p></li>
<li><p>Testarea containerului si a functionalitatilor adaugate</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="mqtt">
<h2>MQTT<a class="headerlink" href="#mqtt" title="Permalink to this heading">¶</a></h2>
<div class="section" id="id1">
<h3>Descriere<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://mqtt.org/">MQTT</a> e un protocol de transmisie de date folosit mult in IoT</p></li>
<li><p>Va trebui creat un <code class="docutils literal notranslate"><span class="pre">client</span></code> si un <code class="docutils literal notranslate"><span class="pre">server</span></code> care vor transmite si vor procesa date (predictie), vor fi 2 <a class="reference external" href="https://pypi.org/project/paho-mqtt/">fisiere</a> de python separate</p></li>
<li><p>Vor trebui construite containere docker si integrat fisierul de server in <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> pentru a putea fi folosit</p></li>
<li><p>Va trebui integrat si un client <a class="reference external" href="https://hub.docker.com/_/eclipse-mosquitto">MQTT</a> in <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> ca sa poate comunica modulele intre ele</p></li>
<li><p>Va trebui testat serverul si comunicarea cu clientul</p></li>
</ul>
</div>
<div class="section" id="id2">
<h3>Implementare<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Se fac 2 fisiere <code class="docutils literal notranslate"><span class="pre">client.py</span></code> si <code class="docutils literal notranslate"><span class="pre">server.py</span></code> folosind exemplele de pe pagina pachetului de <a class="reference external" href="https://pypi.org/project/paho-mqtt/">MQTT</a> pentru python, dar si de inteles implementarea abordarii din exemple</p></li>
<li><p>Se configureaza adecvat problemei, serverul de mqtt se lasa asa cum e</p></li>
<li><p>Se testeaza comunicarea pe un topic cu un mesaj oarecare (sa se afiseze in consola ceea ce trimitem pe topicul <code class="docutils literal notranslate"><span class="pre">/knn/prediction/</span></code>)</p></li>
<li><p>Se rescriu fisierele astfel incat:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">client.py</span></code> sa transmita date pentru server pentru a putea fi interpretate corect</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server.py</span></code> sa primeasca datele cum trebuie, sa le decodeze daca este necesar si sa aplice predictie pe acestea si sa returneze clasa in care se incadreaza datele despre floarea trimisa</p></li>
</ul>
</li>
<li><p>Dupa ce tot ceea ce am testat si integrat functioenaza, se construieste o imagine Docker pentru <code class="docutils literal notranslate"><span class="pre">server.py</span></code></p></li>
<li><p>Se integreaza cele 2 containere de MQTT si de Server in <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code>, se configureaza adecvat si se pornesc containerele</p></li>
<li><p>Se testeaza functionalitatile adaugate</p></li>
</ul>
</div>
</div>
<div class="section" id="ci-cd">
<h2>CI/CD<a class="headerlink" href="#ci-cd" title="Permalink to this heading">¶</a></h2>
<div class="section" id="id3">
<h3>Descriere<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Continuous Integration/Continuous Development, pe scurt <a class="reference external" href="https://www.redhat.com/en/topics/devops/what-is-ci-cd">CI/CD</a>, este o modalitate de a integra ori de cate ori se fac update-uri sau se adauga features in plus unei aplicatii intr-un mod automatizat</p></li>
<li><p>Gitlab are un astfel de mecanism folosindu-se de <a class="reference external" href="https://docs.gitlab.com/runner/">Gitlab Runner</a></p></li>
<li><p>O sa fie nevoie de un repository pe <code class="docutils literal notranslate"><span class="pre">code.siemens.com</span></code>, instalat Gitlab Runner pe VM si atasat repository-ului si de facut fisierul de configurare pe care Gitlab Runner sa il citeasca si sa il execute</p></li>
</ul>
</div>
<div class="section" id="id4">
<h3>Implementare<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Creare repo pe <code class="docutils literal notranslate"><span class="pre">code.siemens.com</span></code>, stabilirea conexiunii pe masina virtuala</p></li>
<li><p>Instalare <a class="reference external" href="https://docs.gitlab.com/runner/install/linux-repository.html">Gitlab Runner</a> si  configurare</p></li>
<li><p>Creare fisier <code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yaml</span></code> (<a class="reference external" href="https://gitlab.com/VladutDinu/fiiincentru-monitorizare_consum_energie/-/blob/pipeline/.gitlab-ci.yml">model</a>)</p>
<ul>
<li><p>Creare stage-uri de Build si Deploy</p></li>
<li><p>Creare task-uri de Build si Deploy</p></li>
<li><p>Adaugare permisiuni pentru Gitlab Runner pentru a putea rula comenzi de Docker</p></li>
<li><p>Commit&amp;Push pe <code class="docutils literal notranslate"><span class="pre">code.siemens.com</span></code></p></li>
</ul>
</li>
<li><p>Testarea si vizualizarea functionalitatii de Gitlab Runner si a procesului de CI/CD</p></li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Limbaje scriptice</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Limbaje Scriptice</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ubuntu-vm">Ubuntu VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-compose">Docker Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#machine-learning">Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mqtt">MQTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ci-cd">CI/CD</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to Limbaje scriptice’s documentation!</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Vladut Dinu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/README.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>